(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{590:function(t,e,n){"use strict";n.r(e);var r=n(568),o=n(210),c=n(461),l=n(453),v=n(477),m=n(481),d=n(197),f=n(195),_=n(127),h=n(57),w=n(524),x=n(478),k=n(449),C=n(516),y=n(561),R=n(64),U=n(475),O=(n(29),n(9)),j=(n(58),{layout:"admin",middleware:"adminAuth",data:function(){return{user:"",userLists:[],mailUser:"",content:"",title:"",alert:!1}},methods:{logout:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("adminAuth/logout");case 2:window.location.href="/admin/login";case 3:case"end":return e.stop()}}),e)})))()},getAdminInformation:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/v1/admins").then((function(e){t.user=e.data.admin})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getUserInformation:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/v1/admins/mails/user-list").then((function(e){t.userLists=e.data.users})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getUserDetailInformation:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/v1/admins/mails/user/".concat(t.$route.query.id)).then((function(e){t.mailUser=e.data.user[0],console.log(t.mailUser)})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},createMail:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data={email:t.mailUser.email,title:t.title,content:t.content},e.next=3,t.$axios.post("/api/v1/admins/mails/send",data).then((function(e){t.title="",t.content="",t.alert=!0})).catch((function(t){console.log(t.response)}));case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.getAdminInformation(),this.getUserInformation(),this.getUserDetailInformation()}}),I=n(61),component=Object(I.a)(j,(function(){var t=this,e=t._self._c;return e("div",[e(R.a,{staticClass:"pr-3",attrs:{color:"white"}},[e(U.a,{staticClass:"title ml-4"},[t._v("Rese管理画面")]),t._v(" "),e(k.a),t._v(" "),e("div",[t._v("メニュー")]),t._v(" "),e(w.a,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[e(o.a,t._g(t._b({attrs:{icon:""}},"v-btn",c,!1),r),[e(d.a,{},[t._v("mdi-chevron-down")])],1)]}}])},[t._v(" "),e(f.a,[e(_.a,[e(h.b,[e(d.a,{staticClass:"mr-2"},[t._v("mdi-account")]),t._v(t._s(t.user.name))],1)],1),t._v(" "),e(v.a),t._v(" "),e(_.a,{attrs:{to:"/admin",router:"",exact:""}},[e(h.b,[t._v("メール作成")])],1),t._v(" "),e(_.a,{attrs:{to:"/admin/owner"}},[e(h.b,[t._v("店舗代表者作成")])],1),t._v(" "),e(_.a,{on:{click:function(e){return t.logout()}}},[e(h.b,[t._v("ログアウト")])],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"admin-card-area"},[e("h2",{staticClass:"admin-title"},[t._v("メール送信")]),t._v(" "),e(c.a,{staticClass:"admin-card"},[e(l.b,[t._v("メール作成")]),t._v(" "),e(v.a),t._v(" "),t.alert?e(r.a,{attrs:{type:"success",color:"green",dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("メールを送信しました。")]):t._e(),t._v(" "),e(x.a,[e(x.a,{staticClass:"table reservation-table"},[e("tbody",[e("tr",[e("th",{staticClass:"text-left bg-gray border-top"},[t._v("ユーザー名")]),t._v(" "),e("td",[t._v(t._s(t.mailUser.name))])]),t._v(" "),e("tr",[e("th",{staticClass:"text-left bg-gray"},[t._v("メールアドレス")]),t._v(" "),e("td",[t._v(t._s(t.mailUser.email))])])])])],1),t._v(" "),e(l.a,[e(m.a,{attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.createMail()}}},[e("label",{attrs:{for:""}},[t._v("タイトル")]),t._v(" "),e(C.a,{staticClass:"mb-3",attrs:{outlined:"",dense:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),e("label",{attrs:{for:""}},[t._v("メール本文")]),t._v(" "),e(y.a,{attrs:{outlined:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),e("div",{staticClass:"text-center mt-3"},[e(o.a,{staticClass:"black white--text mr-2",attrs:{type:"submit",to:"/admin"}},[t._v("戻る")]),t._v(" "),e(o.a,{staticClass:"primary",attrs:{type:"submit"}},[t._v("メール送信")])],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);